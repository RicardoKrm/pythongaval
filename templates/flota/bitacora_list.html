<!-- templates/flota/bitacora_list.html -->
{% extends "flota/base.html" %}

{% block title %}Bitácora Diaria de Horas{% endblock %}

{% block content %}
    <div class="card">
        <h2>Registrar Nuevo Parte Diario</h2>
        <form method="post">
            {% csrf_token %}
            <div class="form-grid">
                {{ form.as_p }}
            </div>
            <br>
            <button type="submit" class="btn-submit">Guardar Registro</button>
        </form>
    </div>

    <div class="card">
        <h2>Últimos 50 Registros</h2>
        <table>
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>Vehículo</th>
                    <th>Horas Operativas</th>
                    <th>Horas Mant. Programado</th>
                    <th>Horas por Falla</th>
                </tr>
            </thead>
            <tbody>
                {% for registro in bitacoras %}
                <tr>
                    <td>{{ registro.fecha|date:"d/m/Y" }}</td>
                    <td>{{ registro.vehiculo }}</td>
                    <td>{{ registro.horas_operativas }}</td>
                    <td>{{ registro.horas_mantenimiento_prog }}</td>
                    <td>{{ registro.horas_falla }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" style="text-align:center; padding: 20px;">No hay registros en la bitácora.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <style>
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        .form-grid p { margin: 0; display: flex; flex-direction: column; }
    </style>
{% endblock %}